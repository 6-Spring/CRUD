<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>crud</title>
    <link rel="stylesheet" href="/static/bootstrap-5.1.3-dist/css/bootstrap.css"/>
    <!-- 引入js -->
    <script type="text/javascript" src="/static/js/jquery-3.6.1.js"></script>
    <script type="text/javascript" src="/static/bootstrap-5.1.3-dist/js/bootstrap.js"></script>
    <script type="text/javascript" src="/static/js/axios.min.js"></script>
    <script type="text/javascript" src="/static/js/vue.js"></script>
    
    
</head>
<body>
    
    <!-- 创建一个容器 -->
    <div id="app">
        <table class="table table-striped">
            <tr>
                <th>ID</th>
                <th>姓名</th>
                <th>年龄</th>
                <th>性别</th>
                <!-- 跨两行 -->
                <th colspan="2">
                <button type="button" class="btn btn-primary">增加</button>
                </th>
            </tr>

            <tr v-for="s in stus">
                <td>{{s.id}}</td>
                <td>{{s.name}}</td>
                <td>{{s.age}}</td>
                <td>{{s.gender}}</td>
                <td>
                    <button type="button" class="btn btn-danger" @click="updateById(s.id)">编辑</button>
                    <button type="button" class="btn btn-success" @click="deleteById(s.id)">删除</button>
                    
                </td>
                
            </tr>

        </table>
    </div>

    

    <!-- 创建vue实例 -->
    <script type="text/javascript">
        new Vue({
            el:'#app',
            data:{
                stus:[]
            },
            created(){
                //加载时，查询所有
                this.selectAll();
            },
            methods: {
                //查询所有
                selectAll(){
                    axios.get("http://localhost:8888/stu/getAll").then((res)=>{
                        this.stus = res.data;
                    })
                },
                //根据ID删除
                deleteById(id) {
                   console.log("nihao:"+id)
                    axios.delete("http://localhost:8888/stu/delete/"+id).then((res)=>{
                        this.selectAll();
                    })

                },
                updateById(id){

                }
            }
        })
    </script>
        
</body>
</html>